# Implementation of Mule BPM Module, using [Mule SDK for Java](https://docs.mulesoft.com/mule-sdk/1.1/getting-started)

This extension was initially created by:
```
mvn archetype:generate -DarchetypeGroupId=org.mule.extensions -DarchetypeArtifactId=mule-extensions-archetype -DgroupId=com.alfame.esb.bpm -DartifactId=mule-bpm-module -Dversion=1.0.0-SNAPSHOT -Dpackage=com.alfame.esb.bpm.module -DextensionName=BPM
```

## Features

### Process factory

[![
sequenceDiagram
    autonumber
    participant Mule BPM App
    participant Mule BPM Module
    participant BPMN 2.0
    activate Mule BPM App
    rect rgb(200, 200, 240)
    Mule BPM App->>Mule BPM Module: <bpm:process-factory />
    activate Mule BPM Module
    Mule BPM Module->>BPMN 2.0: <startEvent />
    activate BPMN 2.0
    deactivate BPMN 2.0
    Mule BPM Module-->>Mule BPM App: com.alfame.esb.bpm.api.BPMProcessInstance
    deactivate Mule BPM Module
    end
    activate Mule BPM App
    Mule BPM App->>Mule BPM App: attributes.processInstanceId
    deactivate Mule BPM App
    deactivate Mule BPM App
](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgYXV0b251bWJlclxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIEFwcFxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIE1vZHVsZVxuICAgIHBhcnRpY2lwYW50IEJQTU4gMi4wXG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgcmVjdCByZ2IoMjAwLCAyMDAsIDI0MClcbiAgICBNdWxlIEJQTSBBcHAtPj5NdWxlIEJQTSBNb2R1bGU6IDxicG06cHJvY2Vzcy1mYWN0b3J5IC8-XG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgTXVsZSBCUE0gTW9kdWxlLT4-QlBNTiAyLjA6IDxzdGFydEV2ZW50IC8-XG4gICAgYWN0aXZhdGUgQlBNTiAyLjBcbiAgICBkZWFjdGl2YXRlIEJQTU4gMi4wXG4gICAgTXVsZSBCUE0gTW9kdWxlLS0-Pk11bGUgQlBNIEFwcDogY29tLmFsZmFtZS5lc2IuYnBtLmFwaS5CUE1Qcm9jZXNzSW5zdGFuY2VcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIGVuZFxuICAgIGFjdGl2YXRlIE11bGUgQlBNIEFwcFxuICAgIE11bGUgQlBNIEFwcC0-Pk11bGUgQlBNIEFwcDogYXR0cmlidXRlcy5wcm9jZXNzSW5zdGFuY2VJZFxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgZGVhY3RpdmF0ZSBNdWxlIEJQTSBBcHAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgYXV0b251bWJlclxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIEFwcFxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIE1vZHVsZVxuICAgIHBhcnRpY2lwYW50IEJQTU4gMi4wXG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgcmVjdCByZ2IoMjAwLCAyMDAsIDI0MClcbiAgICBNdWxlIEJQTSBBcHAtPj5NdWxlIEJQTSBNb2R1bGU6IDxicG06cHJvY2Vzcy1mYWN0b3J5IC8-XG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgTXVsZSBCUE0gTW9kdWxlLT4-QlBNTiAyLjA6IDxzdGFydEV2ZW50IC8-XG4gICAgYWN0aXZhdGUgQlBNTiAyLjBcbiAgICBkZWFjdGl2YXRlIEJQTU4gMi4wXG4gICAgTXVsZSBCUE0gTW9kdWxlLS0-Pk11bGUgQlBNIEFwcDogY29tLmFsZmFtZS5lc2IuYnBtLmFwaS5CUE1Qcm9jZXNzSW5zdGFuY2VcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIGVuZFxuICAgIGFjdGl2YXRlIE11bGUgQlBNIEFwcFxuICAgIE11bGUgQlBNIEFwcC0-Pk11bGUgQlBNIEFwcDogYXR0cmlidXRlcy5wcm9jZXNzSW5zdGFuY2VJZFxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgZGVhY3RpdmF0ZSBNdWxlIEJQTSBBcHAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)

### Mule task listener

[![
sequenceDiagram
    autonumber
    participant Mule BPM App
    participant Mule BPM Module
    participant BPMN 2.0
    activate Mule BPM App
    rect rgb(200, 200, 240)
    Mule BPM App->>Mule BPM Module: <bpm:process-factory />
    activate Mule BPM Module
    Mule BPM Module->>BPMN 2.0: <startEvent />
    activate BPMN 2.0
    rect rgb(180, 190, 230)
    Mule BPM Module->>BPMN 2.0: <serviceTask flowable:type="mule" flowable:async="false" />
    BPMN 2.0->>Mule BPM Module: org.flowable.mule.MuleSendActivityBehavior
    activate Mule BPM Module
    Mule BPM Module->>Mule BPM App: <bpm:task-listener />
    activate Mule BPM App
    Mule BPM App-->>Mule BPM Module: resultVariable
    deactivate Mule BPM App
    Mule BPM Module-->>BPMN 2.0: resultVariable
    BPMN 2.0-->>Mule BPM Module: done
    deactivate Mule BPM Module
    end
    deactivate BPMN 2.0
    Mule BPM Module-->>Mule BPM App: com.alfame.esb.bpm.api.BPMProcessInstance
    deactivate Mule BPM Module
    end
    activate Mule BPM App
    Mule BPM App->>Mule BPM App: attributes.processInstanceId
    deactivate Mule BPM App
    rect rgb(180, 190, 230)
    Mule BPM Module->>BPMN 2.0: <serviceTask flowable:type="mule" flowable:async="true" />
    activate Mule BPM Module
    activate BPMN 2.0
    BPMN 2.0->>Mule BPM Module: org.flowable.mule.MuleSendActivityBehavior
    activate Mule BPM Module
    Mule BPM Module->>Mule BPM App: <bpm:task-listener />
    activate Mule BPM App
    Mule BPM App-->>Mule BPM Module: resultVariable
    deactivate Mule BPM App
    Mule BPM Module-->>BPMN 2.0: resultVariable
    BPMN 2.0-->>Mule BPM Module: done
    deactivate BPMN 2.0
    deactivate Mule BPM Module
    deactivate Mule BPM Module
    end
    deactivate Mule BPM App
](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgYXV0b251bWJlclxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIEFwcFxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIE1vZHVsZVxuICAgIHBhcnRpY2lwYW50IEJQTU4gMi4wXG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgcmVjdCByZ2IoMjAwLCAyMDAsIDI0MClcbiAgICBNdWxlIEJQTSBBcHAtPj5NdWxlIEJQTSBNb2R1bGU6IDxicG06cHJvY2Vzcy1mYWN0b3J5IC8-XG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgTXVsZSBCUE0gTW9kdWxlLT4-QlBNTiAyLjA6IDxzdGFydEV2ZW50IC8-XG4gICAgYWN0aXZhdGUgQlBNTiAyLjBcbiAgICByZWN0IHJnYigxODAsIDE5MCwgMjMwKVxuICAgIE11bGUgQlBNIE1vZHVsZS0-PkJQTU4gMi4wOiA8c2VydmljZVRhc2sgZmxvd2FibGU6dHlwZT1cIm11bGVcIiBmbG93YWJsZTphc3luYz1cImZhbHNlXCIgLz5cbiAgICBCUE1OIDIuMC0-Pk11bGUgQlBNIE1vZHVsZTogb3JnLmZsb3dhYmxlLm11bGUuTXVsZVNlbmRBY3Rpdml0eUJlaGF2aW9yXG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgTXVsZSBCUE0gTW9kdWxlLT4-TXVsZSBCUE0gQXBwOiA8YnBtOnRhc2stbGlzdGVuZXIgLz5cbiAgICBhY3RpdmF0ZSBNdWxlIEJQTSBBcHBcbiAgICBNdWxlIEJQTSBBcHAtLT4-TXVsZSBCUE0gTW9kdWxlOiByZXN1bHRWYXJpYWJsZVxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgTXVsZSBCUE0gTW9kdWxlLS0-PkJQTU4gMi4wOiByZXN1bHRWYXJpYWJsZVxuICAgIEJQTU4gMi4wLS0-Pk11bGUgQlBNIE1vZHVsZTogZG9uZVxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgZW5kXG4gICAgZGVhY3RpdmF0ZSBCUE1OIDIuMFxuICAgIE11bGUgQlBNIE1vZHVsZS0tPj5NdWxlIEJQTSBBcHA6IGNvbS5hbGZhbWUuZXNiLmJwbS5hcGkuQlBNUHJvY2Vzc0luc3RhbmNlXG4gICAgZGVhY3RpdmF0ZSBNdWxlIEJQTSBNb2R1bGVcbiAgICBlbmRcbiAgICBhY3RpdmF0ZSBNdWxlIEJQTSBBcHBcbiAgICBNdWxlIEJQTSBBcHAtPj5NdWxlIEJQTSBBcHA6IGF0dHJpYnV0ZXMucHJvY2Vzc0luc3RhbmNlSWRcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIEFwcFxuICAgIHJlY3QgcmdiKDE4MCwgMTkwLCAyMzApXG4gICAgTXVsZSBCUE0gTW9kdWxlLT4-QlBNTiAyLjA6IDxzZXJ2aWNlVGFzayBmbG93YWJsZTp0eXBlPVwibXVsZVwiIGZsb3dhYmxlOmFzeW5jPVwidHJ1ZVwiIC8-XG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgYWN0aXZhdGUgQlBNTiAyLjBcbiAgICBCUE1OIDIuMC0-Pk11bGUgQlBNIE1vZHVsZTogb3JnLmZsb3dhYmxlLm11bGUuTXVsZVNlbmRBY3Rpdml0eUJlaGF2aW9yXG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgTXVsZSBCUE0gTW9kdWxlLT4-TXVsZSBCUE0gQXBwOiA8YnBtOnRhc2stbGlzdGVuZXIgLz5cbiAgICBhY3RpdmF0ZSBNdWxlIEJQTSBBcHBcbiAgICBNdWxlIEJQTSBBcHAtLT4-TXVsZSBCUE0gTW9kdWxlOiByZXN1bHRWYXJpYWJsZVxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgTXVsZSBCUE0gTW9kdWxlLS0-PkJQTU4gMi4wOiByZXN1bHRWYXJpYWJsZVxuICAgIEJQTU4gMi4wLS0-Pk11bGUgQlBNIE1vZHVsZTogZG9uZVxuICAgIGRlYWN0aXZhdGUgQlBNTiAyLjBcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgZW5kXG4gICAgZGVhY3RpdmF0ZSBNdWxlIEJQTSBBcHAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgYXV0b251bWJlclxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIEFwcFxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIE1vZHVsZVxuICAgIHBhcnRpY2lwYW50IEJQTU4gMi4wXG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgcmVjdCByZ2IoMjAwLCAyMDAsIDI0MClcbiAgICBNdWxlIEJQTSBBcHAtPj5NdWxlIEJQTSBNb2R1bGU6IDxicG06cHJvY2Vzcy1mYWN0b3J5IC8-XG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgTXVsZSBCUE0gTW9kdWxlLT4-QlBNTiAyLjA6IDxzdGFydEV2ZW50IC8-XG4gICAgYWN0aXZhdGUgQlBNTiAyLjBcbiAgICByZWN0IHJnYigxODAsIDE5MCwgMjMwKVxuICAgIE11bGUgQlBNIE1vZHVsZS0-PkJQTU4gMi4wOiA8c2VydmljZVRhc2sgZmxvd2FibGU6dHlwZT1cIm11bGVcIiBmbG93YWJsZTphc3luYz1cImZhbHNlXCIgLz5cbiAgICBCUE1OIDIuMC0-Pk11bGUgQlBNIE1vZHVsZTogb3JnLmZsb3dhYmxlLm11bGUuTXVsZVNlbmRBY3Rpdml0eUJlaGF2aW9yXG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgTXVsZSBCUE0gTW9kdWxlLT4-TXVsZSBCUE0gQXBwOiA8YnBtOnRhc2stbGlzdGVuZXIgLz5cbiAgICBhY3RpdmF0ZSBNdWxlIEJQTSBBcHBcbiAgICBNdWxlIEJQTSBBcHAtLT4-TXVsZSBCUE0gTW9kdWxlOiByZXN1bHRWYXJpYWJsZVxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgTXVsZSBCUE0gTW9kdWxlLS0-PkJQTU4gMi4wOiByZXN1bHRWYXJpYWJsZVxuICAgIEJQTU4gMi4wLS0-Pk11bGUgQlBNIE1vZHVsZTogZG9uZVxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgZW5kXG4gICAgZGVhY3RpdmF0ZSBCUE1OIDIuMFxuICAgIE11bGUgQlBNIE1vZHVsZS0tPj5NdWxlIEJQTSBBcHA6IGNvbS5hbGZhbWUuZXNiLmJwbS5hcGkuQlBNUHJvY2Vzc0luc3RhbmNlXG4gICAgZGVhY3RpdmF0ZSBNdWxlIEJQTSBNb2R1bGVcbiAgICBlbmRcbiAgICBhY3RpdmF0ZSBNdWxlIEJQTSBBcHBcbiAgICBNdWxlIEJQTSBBcHAtPj5NdWxlIEJQTSBBcHA6IGF0dHJpYnV0ZXMucHJvY2Vzc0luc3RhbmNlSWRcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIEFwcFxuICAgIHJlY3QgcmdiKDE4MCwgMTkwLCAyMzApXG4gICAgTXVsZSBCUE0gTW9kdWxlLT4-QlBNTiAyLjA6IDxzZXJ2aWNlVGFzayBmbG93YWJsZTp0eXBlPVwibXVsZVwiIGZsb3dhYmxlOmFzeW5jPVwidHJ1ZVwiIC8-XG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgYWN0aXZhdGUgQlBNTiAyLjBcbiAgICBCUE1OIDIuMC0-Pk11bGUgQlBNIE1vZHVsZTogb3JnLmZsb3dhYmxlLm11bGUuTXVsZVNlbmRBY3Rpdml0eUJlaGF2aW9yXG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgTXVsZSBCUE0gTW9kdWxlLT4-TXVsZSBCUE0gQXBwOiA8YnBtOnRhc2stbGlzdGVuZXIgLz5cbiAgICBhY3RpdmF0ZSBNdWxlIEJQTSBBcHBcbiAgICBNdWxlIEJQTSBBcHAtLT4-TXVsZSBCUE0gTW9kdWxlOiByZXN1bHRWYXJpYWJsZVxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgTXVsZSBCUE0gTW9kdWxlLS0-PkJQTU4gMi4wOiByZXN1bHRWYXJpYWJsZVxuICAgIEJQTU4gMi4wLS0-Pk11bGUgQlBNIE1vZHVsZTogZG9uZVxuICAgIGRlYWN0aXZhdGUgQlBNTiAyLjBcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgZW5kXG4gICAgZGVhY3RpdmF0ZSBNdWxlIEJQTSBBcHAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)

### Variable operations

### Attachments

### Signalling

### Event subscription
