# Implementation of Mule BPM Module, using [Mule SDK for Java](https://docs.mulesoft.com/mule-sdk/1.1/getting-started)

This extension was initially created by:
```
mvn archetype:generate -DarchetypeGroupId=org.mule.extensions -DarchetypeArtifactId=mule-extensions-archetype -DgroupId=com.alfame.esb.bpm -DartifactId=mule-bpm-module -Dversion=1.0.0-SNAPSHOT -Dpackage=com.alfame.esb.bpm.module -DextensionName=BPM
```

## Features

### Process factory

[![
sequenceDiagram
    autonumber
    participant Mule BPM App
    participant Mule BPM Module
    participant BPMN 2.0
    activate Mule BPM App
    rect rgb(200, 200, 240)
    Mule BPM App->>Mule BPM Module: <bpm:process-factory />
    activate Mule BPM Module
    Mule BPM Module->>BPMN 2.0: <startEvent />
    activate BPMN 2.0
    deactivate BPMN 2.0
    Mule BPM Module-->>Mule BPM App: com.alfame.esb.bpm.api.BPMProcessInstance
    deactivate Mule BPM Module
    end
    activate Mule BPM App
    Mule BPM App->>Mule BPM App: attributes.processInstanceId
    deactivate Mule BPM App
    deactivate Mule BPM App
](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgYXV0b251bWJlclxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIEFwcFxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIE1vZHVsZVxuICAgIHBhcnRpY2lwYW50IEJQTU4gMi4wXG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgcmVjdCByZ2IoMjAwLCAyMDAsIDI0MClcbiAgICBNdWxlIEJQTSBBcHAtPj5NdWxlIEJQTSBNb2R1bGU6IDxicG06cHJvY2Vzcy1mYWN0b3J5IC8-XG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgTXVsZSBCUE0gTW9kdWxlLT4-QlBNTiAyLjA6IDxzdGFydEV2ZW50IC8-XG4gICAgYWN0aXZhdGUgQlBNTiAyLjBcbiAgICBkZWFjdGl2YXRlIEJQTU4gMi4wXG4gICAgTXVsZSBCUE0gTW9kdWxlLS0-Pk11bGUgQlBNIEFwcDogY29tLmFsZmFtZS5lc2IuYnBtLmFwaS5CUE1Qcm9jZXNzSW5zdGFuY2VcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIGVuZFxuICAgIGFjdGl2YXRlIE11bGUgQlBNIEFwcFxuICAgIE11bGUgQlBNIEFwcC0-Pk11bGUgQlBNIEFwcDogYXR0cmlidXRlcy5wcm9jZXNzSW5zdGFuY2VJZFxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgZGVhY3RpdmF0ZSBNdWxlIEJQTSBBcHAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgYXV0b251bWJlclxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIEFwcFxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIE1vZHVsZVxuICAgIHBhcnRpY2lwYW50IEJQTU4gMi4wXG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgcmVjdCByZ2IoMjAwLCAyMDAsIDI0MClcbiAgICBNdWxlIEJQTSBBcHAtPj5NdWxlIEJQTSBNb2R1bGU6IDxicG06cHJvY2Vzcy1mYWN0b3J5IC8-XG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgTXVsZSBCUE0gTW9kdWxlLT4-QlBNTiAyLjA6IDxzdGFydEV2ZW50IC8-XG4gICAgYWN0aXZhdGUgQlBNTiAyLjBcbiAgICBkZWFjdGl2YXRlIEJQTU4gMi4wXG4gICAgTXVsZSBCUE0gTW9kdWxlLS0-Pk11bGUgQlBNIEFwcDogY29tLmFsZmFtZS5lc2IuYnBtLmFwaS5CUE1Qcm9jZXNzSW5zdGFuY2VcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIGVuZFxuICAgIGFjdGl2YXRlIE11bGUgQlBNIEFwcFxuICAgIE11bGUgQlBNIEFwcC0-Pk11bGUgQlBNIEFwcDogYXR0cmlidXRlcy5wcm9jZXNzSW5zdGFuY2VJZFxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgZGVhY3RpdmF0ZSBNdWxlIEJQTSBBcHAiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)

### Mule task listener

[![
sequenceDiagram
    autonumber
    participant Mule BPM App
    participant Mule BPM Module
    participant BPMN 2.0
    activate Mule BPM App
    Mule BPM App->>Mule BPM Module: <bpm:process-factory />
    activate Mule BPM Module
    Mule BPM Module->>BPMN 2.0: <startEvent />
    activate BPMN 2.0
    rect rgb(200, 200, 240)
    Mule BPM Module->>BPMN 2.0: <serviceTask flowable:type="mule" flowable:async="false" />
    BPMN 2.0->>Mule BPM Module: org.flowable.mule.MuleSendActivityBehavior
    activate Mule BPM Module
    Mule BPM Module->>Mule BPM App: <bpm:task-listener />
    activate Mule BPM App
    Mule BPM App-->>Mule BPM Module: resultVariable
    deactivate Mule BPM App
    Mule BPM Module-->>BPMN 2.0: resultVariable
    BPMN 2.0-->>Mule BPM Module: done
    deactivate Mule BPM Module
    end
    deactivate BPMN 2.0
    Mule BPM Module-->>Mule BPM App: com.alfame.esb.bpm.api.BPMProcessInstance
    deactivate Mule BPM Module
    activate Mule BPM App
    Mule BPM App->>Mule BPM App: attributes.processInstanceId
    deactivate Mule BPM App
    rect rgb(200, 200, 240)
    Mule BPM Module->>BPMN 2.0: <serviceTask flowable:type="mule" flowable:async="true" />
    activate Mule BPM Module
    activate BPMN 2.0
    BPMN 2.0->>Mule BPM Module: org.flowable.mule.MuleSendActivityBehavior
    activate Mule BPM Module
    Mule BPM Module->>Mule BPM App: <bpm:task-listener />
    activate Mule BPM App
    Mule BPM App-->>Mule BPM Module: resultVariable
    deactivate Mule BPM App
    Mule BPM Module-->>BPMN 2.0: resultVariable
    BPMN 2.0-->>Mule BPM Module: done
    deactivate BPMN 2.0
    deactivate Mule BPM Module
    deactivate Mule BPM Module
    end
    deactivate Mule BPM App
](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgYXV0b251bWJlclxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIEFwcFxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIE1vZHVsZVxuICAgIHBhcnRpY2lwYW50IEJQTU4gMi4wXG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgTXVsZSBCUE0gQXBwLT4-TXVsZSBCUE0gTW9kdWxlOiA8YnBtOnByb2Nlc3MtZmFjdG9yeSAvPlxuICAgIGFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIE11bGUgQlBNIE1vZHVsZS0-PkJQTU4gMi4wOiA8c3RhcnRFdmVudCAvPlxuICAgIGFjdGl2YXRlIEJQTU4gMi4wXG4gICAgcmVjdCByZ2IoMjAwLCAyMDAsIDI0MClcbiAgICBNdWxlIEJQTSBNb2R1bGUtPj5CUE1OIDIuMDogPHNlcnZpY2VUYXNrIGZsb3dhYmxlOnR5cGU9XCJtdWxlXCIgZmxvd2FibGU6YXN5bmM9XCJmYWxzZVwiIC8-XG4gICAgQlBNTiAyLjAtPj5NdWxlIEJQTSBNb2R1bGU6IG9yZy5mbG93YWJsZS5tdWxlLk11bGVTZW5kQWN0aXZpdHlCZWhhdmlvclxuICAgIGFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIE11bGUgQlBNIE1vZHVsZS0-Pk11bGUgQlBNIEFwcDogPGJwbTp0YXNrLWxpc3RlbmVyIC8-XG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgTXVsZSBCUE0gQXBwLS0-Pk11bGUgQlBNIE1vZHVsZTogcmVzdWx0VmFyaWFibGVcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIEFwcFxuICAgIE11bGUgQlBNIE1vZHVsZS0tPj5CUE1OIDIuMDogcmVzdWx0VmFyaWFibGVcbiAgICBCUE1OIDIuMC0tPj5NdWxlIEJQTSBNb2R1bGU6IGRvbmVcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIGVuZFxuICAgIGRlYWN0aXZhdGUgQlBNTiAyLjBcbiAgICBNdWxlIEJQTSBNb2R1bGUtLT4-TXVsZSBCUE0gQXBwOiBjb20uYWxmYW1lLmVzYi5icG0uYXBpLkJQTVByb2Nlc3NJbnN0YW5jZVxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgTXVsZSBCUE0gQXBwLT4-TXVsZSBCUE0gQXBwOiBhdHRyaWJ1dGVzLnByb2Nlc3NJbnN0YW5jZUlkXG4gICAgZGVhY3RpdmF0ZSBNdWxlIEJQTSBBcHBcbiAgICByZWN0IHJnYigyMDAsIDIwMCwgMjQwKVxuICAgIE11bGUgQlBNIE1vZHVsZS0-PkJQTU4gMi4wOiA8c2VydmljZVRhc2sgZmxvd2FibGU6dHlwZT1cIm11bGVcIiBmbG93YWJsZTphc3luYz1cInRydWVcIiAvPlxuICAgIGFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIGFjdGl2YXRlIEJQTU4gMi4wXG4gICAgQlBNTiAyLjAtPj5NdWxlIEJQTSBNb2R1bGU6IG9yZy5mbG93YWJsZS5tdWxlLk11bGVTZW5kQWN0aXZpdHlCZWhhdmlvclxuICAgIGFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIE11bGUgQlBNIE1vZHVsZS0-Pk11bGUgQlBNIEFwcDogPGJwbTp0YXNrLWxpc3RlbmVyIC8-XG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgTXVsZSBCUE0gQXBwLS0-Pk11bGUgQlBNIE1vZHVsZTogcmVzdWx0VmFyaWFibGVcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIEFwcFxuICAgIE11bGUgQlBNIE1vZHVsZS0tPj5CUE1OIDIuMDogcmVzdWx0VmFyaWFibGVcbiAgICBCUE1OIDIuMC0tPj5NdWxlIEJQTSBNb2R1bGU6IGRvbmVcbiAgICBkZWFjdGl2YXRlIEJQTU4gMi4wXG4gICAgZGVhY3RpdmF0ZSBNdWxlIEJQTSBNb2R1bGVcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIGVuZFxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gQXBwIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgYXV0b251bWJlclxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIEFwcFxuICAgIHBhcnRpY2lwYW50IE11bGUgQlBNIE1vZHVsZVxuICAgIHBhcnRpY2lwYW50IEJQTU4gMi4wXG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgTXVsZSBCUE0gQXBwLT4-TXVsZSBCUE0gTW9kdWxlOiA8YnBtOnByb2Nlc3MtZmFjdG9yeSAvPlxuICAgIGFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIE11bGUgQlBNIE1vZHVsZS0-PkJQTU4gMi4wOiA8c3RhcnRFdmVudCAvPlxuICAgIGFjdGl2YXRlIEJQTU4gMi4wXG4gICAgcmVjdCByZ2IoMjAwLCAyMDAsIDI0MClcbiAgICBNdWxlIEJQTSBNb2R1bGUtPj5CUE1OIDIuMDogPHNlcnZpY2VUYXNrIGZsb3dhYmxlOnR5cGU9XCJtdWxlXCIgZmxvd2FibGU6YXN5bmM9XCJmYWxzZVwiIC8-XG4gICAgQlBNTiAyLjAtPj5NdWxlIEJQTSBNb2R1bGU6IG9yZy5mbG93YWJsZS5tdWxlLk11bGVTZW5kQWN0aXZpdHlCZWhhdmlvclxuICAgIGFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIE11bGUgQlBNIE1vZHVsZS0-Pk11bGUgQlBNIEFwcDogPGJwbTp0YXNrLWxpc3RlbmVyIC8-XG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgTXVsZSBCUE0gQXBwLS0-Pk11bGUgQlBNIE1vZHVsZTogcmVzdWx0VmFyaWFibGVcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIEFwcFxuICAgIE11bGUgQlBNIE1vZHVsZS0tPj5CUE1OIDIuMDogcmVzdWx0VmFyaWFibGVcbiAgICBCUE1OIDIuMC0tPj5NdWxlIEJQTSBNb2R1bGU6IGRvbmVcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIGVuZFxuICAgIGRlYWN0aXZhdGUgQlBNTiAyLjBcbiAgICBNdWxlIEJQTSBNb2R1bGUtLT4-TXVsZSBCUE0gQXBwOiBjb20uYWxmYW1lLmVzYi5icG0uYXBpLkJQTVByb2Nlc3NJbnN0YW5jZVxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gTW9kdWxlXG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgTXVsZSBCUE0gQXBwLT4-TXVsZSBCUE0gQXBwOiBhdHRyaWJ1dGVzLnByb2Nlc3NJbnN0YW5jZUlkXG4gICAgZGVhY3RpdmF0ZSBNdWxlIEJQTSBBcHBcbiAgICByZWN0IHJnYigyMDAsIDIwMCwgMjQwKVxuICAgIE11bGUgQlBNIE1vZHVsZS0-PkJQTU4gMi4wOiA8c2VydmljZVRhc2sgZmxvd2FibGU6dHlwZT1cIm11bGVcIiBmbG93YWJsZTphc3luYz1cInRydWVcIiAvPlxuICAgIGFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIGFjdGl2YXRlIEJQTU4gMi4wXG4gICAgQlBNTiAyLjAtPj5NdWxlIEJQTSBNb2R1bGU6IG9yZy5mbG93YWJsZS5tdWxlLk11bGVTZW5kQWN0aXZpdHlCZWhhdmlvclxuICAgIGFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIE11bGUgQlBNIE1vZHVsZS0-Pk11bGUgQlBNIEFwcDogPGJwbTp0YXNrLWxpc3RlbmVyIC8-XG4gICAgYWN0aXZhdGUgTXVsZSBCUE0gQXBwXG4gICAgTXVsZSBCUE0gQXBwLS0-Pk11bGUgQlBNIE1vZHVsZTogcmVzdWx0VmFyaWFibGVcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIEFwcFxuICAgIE11bGUgQlBNIE1vZHVsZS0tPj5CUE1OIDIuMDogcmVzdWx0VmFyaWFibGVcbiAgICBCUE1OIDIuMC0tPj5NdWxlIEJQTSBNb2R1bGU6IGRvbmVcbiAgICBkZWFjdGl2YXRlIEJQTU4gMi4wXG4gICAgZGVhY3RpdmF0ZSBNdWxlIEJQTSBNb2R1bGVcbiAgICBkZWFjdGl2YXRlIE11bGUgQlBNIE1vZHVsZVxuICAgIGVuZFxuICAgIGRlYWN0aXZhdGUgTXVsZSBCUE0gQXBwIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0)

### Variable operations

### Attachments

### Signalling

### Event subscription
